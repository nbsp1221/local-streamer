# 최종 PRD (Product Requirements Document) - Local Streamer

**버전: 1.0프로젝트명: Local Streamer**

> 문서 목표: 본 문서는 'Local Streamer' MVP(Minimum Viable Product) 개발을 위한 모든 요구사항을 정의한다. 기획, 개발, 디자인 등 모든 관련자는 본 문서를 프로젝트의 최종 설계도로 간주하고 작업을 진행한다.
> 

### 1. 프로젝트 개요 (Overview)

### 1-1. 문제 정의 (Problem Statement)

사용자들은 자신의 컴퓨터에 수많은 동영상 파일을 저장하고 있으나, 이를 외부에서 다른 기기로 보기 위해서는 클라우드 서비스에 유료로 업로드하거나, 기술적 지식이 필요한 NAS를 구축해야 하는 불편함이 있다.

### 1-2. 프로젝트 목표 (Goals)

- 사용자가 자신의 PC(또는 홈서버)를 복잡한 설정 없이 개인 미디어 서버로 활용할 수 있도록 한다.
- 로컬 PC의 동영상을 웹 환경에서 실시간으로 스트리밍하여 감상하는 직관적인 경험을 제공한다.
- 개인 사용자를 위한 최소 기능에 집중하여 MVP를 빠르게 개발하고 핵심 가치를 검증한다.

### 1-3. 타겟 사용자 (Target User)

- 자신의 PC 또는 홈서버에 다수의 동영상(영화, 드라마, 개인 녹화 영상 등)을 보관하고 있는 개인.
- 기술적인 복잡함을 싫어하고, 간단한 솔루션을 통해 외부에서 영상을 소비하고 싶어 하는 사용자.

### 2. 제품 기능 명세 (Product Features)

### 2-1. 시스템 아키텍처

- **실시간 스트리밍:** 클라우드에 파일을 동기화하지 않고, 사용자의 서버 PC에서 웹 클라이언트로 직접 동영상 데이터를 스트리밍하는 방식을 채택한다.

### 2-2. PC 에이전트 (Backend Agent)

- **역할:** 웹 클라이언트의 요청에 따라 동영상 스트리밍 및 파일 관리를 수행하는 백엔드 서비스.
- **요구사항:**
    - **폴더 관리:** 사용자가 설정한 '준비 폴더'와 '라이브러리 폴더' 두 경로를 관리한다.
    - **파일 스캔:** 사용자 요청 시 '준비 폴더'를 스캔하여 새로운 파일 목록을 표시한다.

### 2-3. 동영상 관리 및 메타데이터

- **파일 식별자(Key) 정책:**
    - 라이브러리에 영상 추가 시, 시스템은 **`uuidv4`로 고유 ID를 생성**하여 해당 파일의 내부 식별자(Key)로 사용한다.
    - 실제 파일은 `data/videos/{uuidv4}/video.[확장자]` 경로에 저장된다.
    - 사용자가 입력한 제목, 태그, 그리고 원본 파일명 등의 모든 메타데이터는 DB에서 이 `uuidv4` Key에 매핑되어 관리된다.
- **메타데이터:**
    - **제목 (Title):** 필수 입력 항목.
    - **태그 (Tags):** 선택 입력 항목. 쉼표(,)로 다중 입력이 가능하다.

### 2-4. 파일 보호 (File Protection)

- **목표:** 파일 원본이 다운로드되더라도 일반적인 플레이어에서 재생되지 않도록 한다.
- **방식:**
    - **고정 키 XOR 암호화:** 에이전트와 웹 클라이언트는 사전에 코드에 정의된 고정된 키(Fixed Key)를 공유한다.
    - 에이전트는 스트리밍 시 실시간으로 데이터를 XOR 암호화하여 전송하고, 웹 플레이어는 동일한 키로 복호화하여 재생한다.

### 2-5. 웹 인터페이스 (Web Interface)

- **역할:** 사용자가 라이브러리를 관리하고, 영상을 검색하며, 시청하는 웹 기반 클라이언트.
- **요구사항:**
    - **UI/UX 벤치마크:** 전반적인 라이브러리, 검색, 재생 페이지의 사용자 경험은 **유튜브(YouTube)**를 벤치마킹하여 직관적이고 익숙한 인터페이스를 제공한다.
    - **레이아웃:**
        - **라이브러리:** 썸네일과 제목이 표시되는 그리드(격자) 뷰를 기본으로 한다.
        - **네비게이션:** 화면 상단에 검색창과 '영상 추가' 알림 아이콘이 포함된 고정 네비게이션 바를 배치한다.
    - **비디오 플레이어:**
        - `@vidstack/react` 라이브러리를 활용한다.
        - 필수 컨트롤: 재생/일시정지, 볼륨 조절, 전체화면, 10초 앞/뒤로 가기, 재생 속도 조절.

### 3. 사용자 흐름 및 시나리오 (User Flow & Scenarios)

### 3-1. 최초 설정 (Initial Setup Flow)

1. **[사용자]** 서비스를 실행한다.
2. **[사용자]** 웹 브라우저로 서버 주소에 접속한다.
3. **[시스템]** 관리자 계정이 없으면 '최초 관리자 계정 생성' 페이지로 이동시킨다.
4. **[사용자]** 이메일(ID)과 비밀번호를 입력하여 계정을 생성한다.
5. **[시스템]** 사용자 정보를 DB에 저장하고, 비어있는 메인 라이브러리 페이지로 이동시킨다.

### 3-2. 새 동영상 추가 (Add New Video Flow)

1. **[사용자]** '준비 폴더'에 동영상 파일을 넣는다.
2. **[사용자]** 웹 UI 상단의 '동영상 추가' 아이콘을 클릭한다.
3. **[시스템]** '준비 폴더'를 스캔하여 새 파일 목록을 표시한다.
4. **[시스템]** '추가할 동영상 목록' 페이지를 표시한다.
5. **[사용자]** 목록에서 특정 파일을 선택하여 제목과 태그를 입력하고 '라이브러리에 추가' 버튼을 클릭한다.
6. **[시스템]**
    - 입력된 메타데이터와 함께 `uuidv4` Key를 생성하여 DB에 저장한다.
    - 파일을 `data/videos/{uuidv4}/video.[확장자]` 경로로 이동시킨다.
    - 모달과 라이브러리 UI를 갱신한다.
7. **[사용자]** 라이브러리에 새 영상이 추가된 것을 확인한다.

### 3-3. 동영상 탐색 및 재생 (Browse and Play Flow)

1. **[사용자]** 메인 라이브러리 페이지에서 썸네일 그리드를 탐색한다.
2. **[사용자 - 검색]** 상단 검색창에 키워드를 입력하여 제목 또는 태그로 영상을 검색한다.
3. **[사용자 - 필터링]** 특정 영상의 태그(예: `#일상`)를 클릭하여 해당 태그가 달린 영상만 필터링한다.
4. **[사용자 - 재생]** 시청할 동영상의 썸네일을 클릭한다.
5. **[시스템]** 별도의 동영상 재생 페이지로 이동하여 즉시 스트리밍을 시작한다. 플레이어 하단에는 영상의 제목과 태그가 표시된다.

### 4. 정책 및 범위 (Policies & Scope)

### 4-1. 예외 처리 정책 (Error Handling)

- **비디오 외 파일:** '준비 폴더'에 동영상이 아닌 파일(이미지, 텍스트 등)이 추가될 경우, 시스템은 해당 파일을 무시하고 '추가할 동영상 목록' 모달에 경고 메시지와 함께 표시한다. 라이브러리 추가는 불가능하다.
- **스트리밍 중단:** 네트워크 불안정 등으로 인한 스트리밍 중단은 MVP 범위에서 별도의 UI로 처리하지 않으며, 브라우저의 기본 동작에 따른다.

### 4-2. 범위 외 사항 (Out of Scope for MVP)

다음 기능들은 MVP 버전에 포함되지 않으며, 향후 버전에서 고려될 수 있다.

- 다중 사용자 지원 및 영상 공유 기능
- 다중 화질 지원을 위한 트랜스코딩
- 자막(.smi, .srt 등) 파일 지원
- 재생 목록(Playlist) 기능
